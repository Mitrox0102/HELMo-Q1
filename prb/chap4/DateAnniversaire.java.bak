package chap4;

import io.Console;
import io.Date;

public class DateAnniversaire {

    public static void main(String[] args){
        
        //Variables
        String prenom, dateNaissance;
        
        //Acquisition du prénom
        
        prenom = Console.lireString("Prénom ? ");
        
        //Acquisition de la date de naissance
        
        dateNaissance = Console.lireString("Date de naissance (j/m/a) ? ");
        
        //Acquisition
        
        //Afficher un message de bienvenue
        System.out.println("Bienvenue " + prenom + " !"); 
        
        //Extraire les 3 valeurs de la date sous forme d'entiers
        //a) Extraire le jour
        
        int posSlash1 = dateNaissance.indexOf('/'); // non static
        String jourStr = dateNaissance.substring(0, posSlash1); // non static
        int jour = Integer.parseInt(jourStr); // static
        // System.out.println(jour); // DEBUG
        
        
        //b) Extraire le mois
        
        int posSlash2 = dateNaissance.indexOf('/', posSlash1 + 1);
        String moisStr = dateNaissance.substring(posSlash1 + 1, posSlash2);
        int mois = Integer.parseInt(moisStr);
        // System.out.println(mois);
        
        //c) Extraire l'année
        
        String anneeStr = dateNaissance.substring(posSlash2 + 1);
        int annee = Integer.parseInt(anneeStr);
        // System.out.println(annee);
        
        //d) Calculer l'âge de la personne
        int anneeAjd = Date.anneeAuj();
        int numJourAjd = Date.numeroJour();
        int numJourAnniv = Date.numeroJour(jour, mois, anneeAjd);
        int age = anneeAjd - annee - Math.min(1, numJourAnniv) / numJourAjd;
        
        if (numJourAnniv > numJourAjd){
            age --;
        }
        
        //Afficher l'âge de la personne
        System.out.printf("Vous êtes né le %d / %d / %d \n", jour, mois, annee);
        System.out.println("Vous avez " + age + " an(s)");
        
    }

}